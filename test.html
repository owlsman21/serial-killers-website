<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Serial Killer Case Files Archive | True Crime Documentaries</title>
    <meta name="description" content="Explore the complete archive of serial killer case files, including Ted Bundy, Jeffrey Dahmer, and Aileen Wuornos. True crime facts and full documentaries.">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Nosifer&family=Butcherman&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css"> 
    
    <!-- Required for the Facebook icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- Tailwind CSS for button and dynamic styling -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Analytics Script (Fixed: Synchronous initialization of dataLayer) -->
    <script>
      // Fixes the "dataLayer is not defined" error by initializing the array synchronously.
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-89YSPCWZ89');
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-89YSPCWZ89"></script>
    
    <meta name="p:domain_verify" content="d4e46af2c48f116432d25166abbfb350"/>
    
    <!-- CRITICAL LAYOUT FIXES: CSS for main wrapper and grid -->
    <style>
        /* Apply the background color and default font for the entire page */
        body {
            background-color: #333; /* Darker background to make red/black stand out */
            color: #fff;
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* Container to center and limit the main content width */
        .container {
            max-width: 2200px; /* INCREASED MAX WIDTH: More space for 6 columns */
            margin: 0 auto; /* Center the container */
            padding: 0 16px; /* Padding for mobile screens */
        }
        
        /* Grid container for the video cards */
        .case-grid-index {
            display: grid !important; /* Force Grid Display */
            min-width: 100%; /* FIX: Ensure the grid uses the full width available */
            /* Default: On small screens, 1 column */
            grid-template-columns: 1fr; 
            gap: 25px; /* Slightly increased gap for better spacing */
            padding: 40px 0;
        }
        
        /* Tablet/Medium Screen: 3 Columns */
        @media (min-width: 768px) {
            .case-grid-index {
                /* Forces exactly 3 equal columns on medium screens */
                grid-template-columns: repeat(3, 1fr) !important; 
            }
        }
        
        /* Desktop/Large Screen: 6 Columns */
        @media (min-width: 1024px) {
            .case-grid-index {
                /* 6 equal columns, use !important to guarantee override */
                grid-template-columns: repeat(6, 1fr) !important; 
            }
        }


        /* Styling for the video cards */
        .index-card {
            background-color: #1a1a1a;
            border: 1px solid #e10600;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(255, 0, 0, 0.4);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            
            /* Fixed height for alignment. Increased slightly for better fit. */
            height: 580px; 
        }
        
        .index-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(255, 0, 0, 0.8);
        }

        /* Fix the video aspect ratio using a common wrapper pattern */
        .video-wrapper {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* 16:9 Aspect Ratio (9/16 * 100) */
            background-color: black;
        }

        .embedded-video-player {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 2px solid #e10600;
        }
        
        .index-card-title {
            font-family: 'Nosifer', cursive;
            color: #e10600;
            text-align: center;
            padding: 15px 5px 5px; 
            font-size: 1.3rem;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
            /* Ensure title text can wrap */
            word-wrap: break-word; 
            overflow-wrap: break-word;
        }

        /* Shrink title font when in 6-column mode */
        @media (min-width: 1024px) {
             .index-card-title {
                font-size: 1.1rem; /* Slightly larger font size now that the container is wider */
                line-height: 1.2;
            }
        }
        
        .index-card-description {
            padding: 0 15px;
            font-size: 0.9rem;
            color: #ccc;
            /* Scrollbar settings for fixed height */
            max-height: 160px; /* Adjusted max-height */
            overflow-y: auto; 
            margin-bottom: 15px; 
            
            /* Optional: Style the scrollbar for aesthetics */
            scrollbar-width: thin;
            scrollbar-color: #e10600 #1a1a1a; 
        }
        
        .index-card-description::-webkit-scrollbar {
            width: 8px;
        }

        .index-card-description::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        .index-card-description::-webkit-scrollbar-thumb {
            background-color: #e10600;
            border-radius: 4px;
            border: 1px solid #333;
        }
        
        /* Style for the button that is inside the card */
        .full-story-button {
            background-color: #CC0000;
            color: white;
            padding: 12px 20px;
            font-weight: bold;
            text-transform: uppercase;
            text-decoration: none;
            display: block;
            text-align: center;
            border-radius: 4px;
            transition: background-color 0.3s ease;
            margin: 0 15px 15px; 
            margin-top: auto; /* Ensures the button is always at the bottom of the card */
        }

        .full-story-button:hover {
            background-color: #990000;
        }

        /* Generic styles for the audio and Facebook links */
        .audio-link, .centered-button {
            margin-top: 40px;
            margin-bottom: 40px;
            display: block;
            text-align: center;
            font-size: 1.2rem;
        }

        .audio-link {
            color: #ffaa00;
            text-decoration: underline;
        }
        
        /* Override for the main 'RETURN TO HOME PAGE' button at the top */
        .container > div:first-of-type .full-story-button {
            width: fit-content;
            margin: 0 auto;
        }

        /* Custom style for the main navigation row */
        .main-nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap; /* Allows wrapping on smaller screens */
        }

        .nav-button {
            flex-grow: 1;
            max-width: 300px;
            font-size: 1.1rem;
            padding: 15px 25px;
            text-shadow: 1px 1px 2px #000;
        }

        /* Footer styling */
        footer p {
            color: #999;
        }

    </style>
</head>
<body>
    
    <div class="container">
        <!-- Main Header -->
        <h1 style="color: red; text-align: center; margin-bottom: 30px; font-family: 'Creepster', cursive; font-size: 3rem; text-shadow: 2px 2px 5px rgba(255,0,0,0.5);">
            SERIAL KILLER CASE ARCHIVE
        </h1>
        
        <!-- MAIN NAVIGATION LINKS -->
        <div class="main-nav-buttons">
            <a href="../index.html" class="full-story-button nav-button" style="background-color: #4a0000;">
                ‚Üê RETURN TO HOME PAGE
            </a>
            <!-- CORRECTED LINK: Changed from cases-archives.html (plural) to cases-archive.html (singular) -->
            <a href="../cases-archive.html" class="full-story-button nav-button" style="background-color: #e10600; color: #fff; border: 2px solid #fff;">
                <i class="fas fa-file-archive"></i> CASES ARCHIVES
            </a>
            <a href="../killer-cinema.html" class="full-story-button nav-button" style="background-color: #e10600; color: #fff; border: 2px solid #fff;">
                <i class="fas fa-film"></i> KILLER CINEMA
            </a>
        </div>
        <!-- END MAIN NAVIGATION LINKS -->

        <!-- Featured Cases Section Header -->
        <section id="featured-cases-header" style="margin-top: 60px; padding: 20px; background-color: #111; border-top: 2px solid red; border-bottom: 2px solid red;">
            <h2 style="color: red; font-family: 'Nosifer', cursive; font-size: 2rem; text-align: center; letter-spacing: 2px;">Featured Crime Cases (Video Archive)</h2>
        </section>

        <!-- Dynamic Content Wrapper -->
        <div class="main-content-wrapper">
            
            <!-- 1. The Container where the video cards will be rendered -->
            <div class="case-grid-index" id="caseGrid">
                <p style="color: gray; text-align: center;">Loading Case Files...</p>
            </div>
            
            <!-- 2. The Container for the Pagination buttons -->
            <div id="pagination-controls" style="text-align: center;">
                <!-- Pagination buttons will load here -->
            </div>
        </div>

        <!-- Audio Archive Link and Facebook Link -->
        <a href="audio.html" class="audio-link">üéß Enter the Serial Killer Audio Archive</a>
        <div style="text-align: center;">
            <a href="https://www.facebook.com/groups/403207477513491" 
           target="_blank" 
           class="centered-button full-story-button" style="background-color: #3b5998; width: fit-content; margin: 40px auto;">
           
           <i class="fab fa-facebook-f"></i> Join the [Serial killers Movies and documentray's] Facebook Group!
        </a>
        </div>
        
    </div> 

    <!-- Footer and Scripts -->
    <footer style="margin-top: 60px; padding: 20px; text-align: center; font-size: 0.9em; color: #666; background-color: #111; border-top: 2px solid red;">
        <p><a href="sitemap.html" style="color: #e10600; text-decoration: none;">ü©∏ Sitemap: The Archive</a></p>
        <p>Last updated: October 2025 | Access indexed by forensic investigation</p>
    </footer>

    <!-- CONSOLIDATED JAVASCRIPT: DATA AND LOGIC -->
    <script>
        // --- 1. DATA (from index-data.js) ---
        const featuredCases = [
            {
                "id": "BTK_Killer",
                "posterUrl": "images/Dennis_Lynn_Rader.jpg",
                "year": 2016,
                "title": "Dennis Rader: The BTK Killer",
                "description": "Dennis Rader's killings occurred between 1974 and 1991, during which time he killed a total of 10 people (the first four of whom were killed in one night). He sent cryptic letters to media and police, terrorizing Wichita for decades.",
                "embedId": "4h224QXYD-I", 
                "genres": ["Crime", "Action"],
                "source": "youtube"
            },
            {
                "id": "AileenWuornos",
                "posterUrl": "images/aileen-wuornos.jpg",
                "year": 2017,
                "title": "Aileen Wuornos: The Female Serial Killer",
                "description": "Aileen Carol Wuornos was an American serial killer who murdered seven men in Florida between 1989 and 1990. She claimed the men had either raped or attempted to rape her while she was working as a prostitute.",
                "embedId": "iR7o0t1y1eI", 
                "genres": ["Crime", "Documentary"],
                "source": "youtube"
            },
            {
                "id": "JeffreyDahmer",
                "posterUrl": "images/dahmer.jpg",
                "year": 2017,
                "title": "Jeffrey Dahmer: The Milwaukee Cannibal",
                "description": "Jeffrey Lionel Dahmer, also known as the Milwaukee Monster or the Milwaukee Cannibal, was an American serial killer and sex offender who murdered and dismembered seventeen males between 1978 and 1991.",
                "embedId": "rM4y2lS219I",
                "genres": ["Crime", "Documentary"],
                "source": "youtube"
            },
            {
                "id": "TedBundy",
                "posterUrl": "images/ted-bundy.jpg",
                "year": 2017,
                "title": "Ted Bundy: The Campus Killer",
                "description": "Theodore Robert Bundy was an American serial killer, kidnapper, rapist, burglar, and necrophile who assaulted and murdered numerous young women and girls during the 1970s and possibly earlier.",
                "embedId": "3Y12G8Q-kR4", 
                "genres": ["Crime", "Documentary"],
                "source": "youtube"
            },
            {
                "id": "SonOfSam",
                "posterUrl": "images/sam.jpg",
                "year": 2016,
                "title": "The Son Of Sam: Destined To Be A Serial Killer? ",
                "description": "David Berkowitz was born as Richard David Falco. His mother had him out of wedlock when she had an affair with a married real-estate agent named Joseph Klineman...",
                "embedId": "ZatEG03Y6Zg", 
                "genres": ["Crime", "Action"],
                "source": "youtube"
            },
            {
                "id": "RichardRamirez",
                "posterUrl": "images/night_stalker.jpg",
                "year": 2021,
                "title": "Richard Ramirez: The Night Stalker",
                "description": "Richard Leyva Mu√±oz Ramirez, known as the Night Stalker, was an American serial killer and rapist whose crime spree took place in California between June 1984 and August 1985. He was convicted of 13 murders.",
                "embedId": "gB4q0uR1r3g", 
                "genres": ["Crime", "Documentary"],
                "source": "youtube"
            },
            {
                "id": "SnowtownMurders", // Added your Ok.ru case
                "posterUrl": "images/snowtown.jpg",
                "year": 2003,
                "title": "Snowtown Murders: The Bodies in the Barrels",
                "description": "The Snowtown murders were a series of murders committed by four people in South Australia, which took place between August 1992 and May 1999. The victims' dismembered bodies were found in barrels of acid in a rented bank vault in Snowtown.",
                "embedId": "1945115598516", // Ok.ru Embed ID (assuming this is the ID from your index.html)
                "genres": ["Crime", "Horror"],
                "source": "ok.ru" // CRITICAL: Specify the source
            }
        ];

        // --- 2. LOGIC (from index-logic.js) ---
        const entriesPerPage = 6; 
        let currentPage = 1;

        // Function to determine the correct iframe source URL based on the video platform
        function getVideoSourceUrl(embedId, source) {
            if (source === 'youtube' || source === 'YouTube') {
                return `https://www.youtube.com/embed/${embedId}`;
            } else if (source === 'ok.ru' || source === 'ok') {
                // Ok.ru embed format typically looks like this
                return `https://ok.ru/videoembed/${embedId}`;
            }
            // Fallback for unknown/missing source
            return ''; 
        }

        function createCard(caseData) {
            const videoSrc = getVideoSourceUrl(caseData.embedId, caseData.source);

            if (!videoSrc) {
                console.error("Missing or invalid embedId/source for case:", caseData.title || caseData.id);
                // Return an error placeholder card if the embed ID or source is broken
                return `
                    <div class="index-card" style="border-color: yellow;">
                        <h3 class="index-card-title" style="color: yellow;">${caseData.title || 'Untitled Case'}</h3>
                        <div class="video-wrapper" style="background-color: #444;">
                            <p style="text-align: center; color: yellow; padding: 20%; font-size: 1.2rem;">
                                VIDEO UNAVAILABLE (Broken Link or Unknown Source)
                            </p>
                        </div>
                        <p class="index-card-description">
                            The embedded video link is currently broken or the source (${caseData.source || 'N/A'}) is unsupported.
                        </p>
                        <a href="${storyLink}" class="full-story-button" style="background-color: yellow; color: black;">READ FULL STORY</a>
                    </div>
                `;
            }

            const storyLink = `story.html?id=${caseData.id}`;
            
            return `
                <div class="index-card">
                    <h3 class="index-card-title">${caseData.title || 'Untitled Case'}</h3>
                    <div class="video-wrapper">
                        <iframe 
                            class="embedded-video-player"
                            src="${videoSrc}"
                            title="Video player for ${caseData.title}"
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                        </iframe>
                    </div>
                    <p class="index-card-description">
                        <strong>Year:</strong> ${caseData.year || 'N/A'} | 
                        <strong>Genres:</strong> ${caseData.genres ? caseData.genres.join(', ') : 'N/A'}
                        <br>
                        ${caseData.description || 'No description available.'}
                    </p>
                    <a href="${storyLink}" class="full-story-button">READ FULL STORY</a>
                </div>
            `;
        }

        function renderCards() {
            const caseGrid = document.getElementById('caseGrid');
            
            if (typeof featuredCases === 'undefined' || featuredCases.length === 0) {
                caseGrid.innerHTML = '<p style="color: red; text-align: center; font-size: 1.5rem; padding: 50px;">CRITICAL ERROR: Data is undefined or empty. File structure may be incorrect.</p>';
                return;
            }
            
            caseGrid.innerHTML = ''; // Clear the "Loading Case Files..." message

            const startIndex = (currentPage - 1) * entriesPerPage;
            const endIndex = startIndex + entriesPerPage;
            
            // NOTE: The featuredCases array now has 7 items, so the pagination will automatically split them.
            const casesToRender = featuredCases.slice(startIndex, endIndex);

            if (casesToRender.length === 0) {
                caseGrid.innerHTML = '<p style="color: red; text-align: center; font-size: 1.5rem; padding: 50px;">No case files found for this page.</p>';
                return;
            }

            // Use join('') for better performance than repeated +=
            const cardHTML = casesToRender.map(createCard).join('');
            caseGrid.innerHTML = cardHTML;
            
            renderPagination();
        }

        function renderPagination() {
            const paginationControls = document.getElementById('pagination-controls');
            paginationControls.innerHTML = ''; 

            const totalPages = Math.ceil(featuredCases.length / entriesPerPage);

            if (totalPages <= 1) {
                return; 
            }

            const prevButton = document.createElement('button');
            prevButton.textContent = '‚Üê Previous Page';
            prevButton.className = 'full-story-button mx-2 disabled:opacity-50'; 
            prevButton.disabled = currentPage === 1;
            prevButton.onclick = () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderCards();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            };
            paginationControls.appendChild(prevButton);

            const pageIndicator = document.createElement('span');
            pageIndicator.textContent = `Page ${currentPage} of ${totalPages}`;
            pageIndicator.className = 'text-white mx-4 text-lg font-bold';
            paginationControls.appendChild(pageIndicator);


            const nextButton = document.createElement('button');
            nextButton.textContent = 'Next Page ‚Üí';
            nextButton.className = 'full-story-button mx-2 disabled:opacity-50'; 
            nextButton.disabled = currentPage === totalPages;
            nextButton.onclick = () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    renderCards();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            };
            paginationControls.appendChild(nextButton);
        }

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', renderCards);
    </script>
</body>
</html>